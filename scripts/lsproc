#!/bin/sh
# Luis Mondesi < lemsx1@gmail.com >
# 
# DESCRIPTION: a simple way to list running processes
# USAGE: lsproc [process_name]
# LICENSE: GPL
#

PS='ps -eo pid,user,nice,rss,s,args'
SORT='sort -k4 -r -n'

if [ `uname -s` = 'Darwin' ]; then
    PS='ps -eco pid,user,rss,comm'
    SORT='sort --key=3 --reverse --numeric-sort'
fi

if [ -n "$1" ]; then
    $PS | head -1 # put the header
    $PS | grep -v lsproc | grep -v PID | grep -v grep | grep  $1 | $SORT
else
    $PS | head -1 # put the header
    $PS | grep -v lsproc | grep -v PID | grep -v grep | $SORT
fi
